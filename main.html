<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" lang="ru" xml:lang="ru">
   <head>
      <title>ex 9.1.1</title>
      <meta http-equiv="content-type" content="text/html; charset=utf-8" />
      <script src="jquery/jquery-1.5.2.min.js" type="text/javascript"></script>
      <style type="text/css">
         div {
            width: 400px;
            height: 400px;
            padding: 10px;
            margin: 10px;
            border: 3px double #369;
            overflow: auto;
         }
      </style>
      <script type="text/javascript">
         $(function() {
            $.ajaxSetup({
               url: 'testEvents.php',
               type: 'POST',
               timeout: 4000,
               beforeSend: function() {
                  $('#target').append(new Date().getTime() + ' ==> beforeSend<br />')
               },
               success: function(data, textStatus, jqXHR) {
                  $('#target').append(new Date().getTime() + ' ==> success<br />')
               },
               error: function(jqXHR, textStatus) {
                  $('#target').append(new Date().getTime() + ' ==> error<br />')
               },
               complete: function() {
                  $('#target').append(new Date().getTime() + ' ==> complite<br />')
               }
            });
            $('#well').click(function() {
               $('#target').empty();
               $.ajax({
                  data: 'er=none'
               });
            });
            $('#bad').click(function() {
               $('#target').empty();
               $.ajax({
                  data: 'er=yes'
               });
            });
            $('#target').ajaxStart(function() {
               $(this).append(new Date().getTime() + ' =>> ajaxStart <br/>');
            }).ajaxSend(function() {
               $(this).append(new Date().getTime() + ' =>> ajaxSend <br/>');
            }).ajaxSuccess(function() {
               $(this).append(new Date().getTime() + ' =>> ajaxSuccess <br/>');
            }).ajaxError(function() {
               $(this).append(new Date().getTime() + ' =>> ajaxError <br/>');
            }).ajaxComplete(function() {
               $(this).append(new Date().getTime() + ' =>> ajaxComplite <br/>');
            }).ajaxStop(function() {
               $(this).append(new Date().getTime() + ' =>> ajaxStop <br/>');
            });
         });
      </script>
   </head>
   <body>
      <div id="target"></div>
      <button id="well">Успешный запрос</button>
      <button id="bad">Ошибочный запрос</button>
   </body>
</html>
